---
import { isHTMLBytes } from "astro/dist/runtime/server/escape";
import CaseStudy1 from "../case-study1.astro";
import { contentfulClient } from "../../lib/contentful";
import type { CaseStudy } from "../../lib/contentful";
import { log } from "astro/dist/core/logger/core";
import Title1 from "../../components/caseStudy-components/Title1.astro";
import Comp2 from "../../components/caseStudy-components/comp2.astro";
import Comp3 from "../../components/caseStudy-components/comp3.astro";
import Comp4 from "../../components/caseStudy-components/comp4.astro";
import Comp5CenterText from "../../components/caseStudy-components/comp5CenterText.astro";
import Comp6ParallelImgs from "../../components/caseStudy-components/comp6ParallelImgs.astro";
import Comp6b_belowParallel from "../../components/caseStudy-components/comp6b_belowParallel.astro";

import Comp7Bottom from "../../components/caseStudy-components/comp7Bottom.astro";

import { documentToHtmlString } from "@contentful/rich-text-html-renderer";
import Layout from "../../layouts/Layout.astro";
export async function getStaticPaths() {
  const entries = await contentfulClient.getEntries<any>({
    content_type: "caseStudy",
  });

  const pages = entries.items.map((item) => {
    return {
      params: { slug: item.fields.heroTitle },
      props: {
        caseStudyData: item,
      },
    };
  });
  return pages;
}

const { caseStudyData } = Astro.props;
---

<Layout title="case study">
  <Title1
    heroTitle={documentToHtmlString(caseStudyData.fields.heroTitleMain)}
    heroVideo={caseStudyData.fields?.heroVideo?.fields?.file.url}
    herobanner={caseStudyData.fields?.heroBanner?.fields?.file.url}
    whichTechnology={caseStudyData.fields?.whichTechnology}
    herobanner2={caseStudyData.fields?.heroBanner2?.fields?.file.url}
    heroContent={documentToHtmlString(caseStudyData.fields.heroContent)}
    pointerHead1={documentToHtmlString(caseStudyData.fields.pointerHead1)}
    pointerHeading1={caseStudyData.fields?.pointerHeading1}
    contentPointers1={documentToHtmlString(
      caseStudyData.fields.contentPointers1
    )}
    pointerHead2={documentToHtmlString(caseStudyData.fields.pointerHead2)}
    pointerHeading2={caseStudyData.fields?.pointerHeading2}
    contentPointers2={documentToHtmlString(
      caseStudyData.fields.contentPointers2
    )}
    clientInfo={documentToHtmlString(caseStudyData.fields.clientInfo)}
    solutionInfo={documentToHtmlString(caseStudyData.fields.solutionInfo)}
    brandLogo1={caseStudyData?.fields?.brandLogos &&
      caseStudyData?.fields?.brandLogos[0]?.fields?.file.url}
    brandLogo2={caseStudyData?.fields?.brandLogos &&
      caseStudyData?.fields?.brandLogos[1]?.fields?.file.url}
    carousalImage1={caseStudyData?.fields?.carousalImages &&
      caseStudyData?.fields?.carousalImages[0]?.fields?.file.url}
    carousalImage2={caseStudyData?.fields?.carousalImages &&
      caseStudyData?.fields?.carousalImages[1]?.fields?.file.url}
    carousalImage3={caseStudyData?.fields?.carousalImages &&
      caseStudyData?.fields?.carousalImages[2]?.fields?.file.url}
    carousalImage4={caseStudyData?.fields?.carousalImages &&
      caseStudyData?.fields?.carousalImages[3]?.fields?.file.url}
    carousalImage5={caseStudyData?.fields?.carousalImages &&
      caseStudyData?.fields?.carousalImages[4]?.fields?.file.url}
    carousalImage6={caseStudyData?.fields?.carousalImages &&
      caseStudyData?.fields?.carousalImages[5]?.fields?.file.url}
  />

  <Comp2
    belowCarousalTitle={documentToHtmlString(
      caseStudyData.fields.belowCarousalTitle
    )}
    belowCarousalText={documentToHtmlString(
      caseStudyData.fields.belowCarousalText
    )}
    fullSizeImg={caseStudyData?.fields?.fullSizeImg?.fields?.file.url}
  />

  {
    caseStudyData?.fields?.midContentImg && (
      <Comp3
        midContentTitle={documentToHtmlString(
          caseStudyData?.fields?.midContentTitle
        )}
        midContentImg={
          caseStudyData?.fields?.midContentImg &&
          caseStudyData?.fields?.midContentImg[0]?.fields?.file.url
        }
        midImgCaption={documentToHtmlString(caseStudyData.fields.midImgCaption)}
        midContentText={documentToHtmlString(
          caseStudyData.fields.midContentText
        )}
      />
    )
  }

  {
    caseStudyData.fields.tiltImagesTitle && (
      <Comp4
        tiltImagesTitle={documentToHtmlString(
          caseStudyData.fields.tiltImagesTitle
        )}
        tiltImagesText={documentToHtmlString(
          caseStudyData.fields.tiltImagesText
        )}
        tiltImage1={
          caseStudyData?.fields?.tiltImages &&
          caseStudyData?.fields?.tiltImages[0]?.fields?.file.url
        }
        tiltImage2={
          caseStudyData?.fields?.tiltImages &&
          caseStudyData?.fields?.tiltImages[1]?.fields?.file.url
        }
        tiltImage3={
          caseStudyData?.fields?.tiltImages &&
          caseStudyData?.fields?.tiltImages[2]?.fields?.file.url
        }
      />
    )
  }

  <Comp5CenterText
    bottomCompTitle={documentToHtmlString(caseStudyData.fields.bottomCompTitle)}
    bottomCompText={documentToHtmlString(caseStudyData.fields.bottomCompText)}
  />
  {
    caseStudyData?.fields?.bottomCompImgs && (
      <Comp6ParallelImgs
        parallelImg1={
          caseStudyData?.fields?.bottomCompImgs &&
          caseStudyData?.fields?.bottomCompImgs[0]?.fields?.file.url
        }
        parallelImg2={
          caseStudyData?.fields?.bottomCompImgs &&
          caseStudyData?.fields?.bottomCompImgs[1]?.fields?.file.url
        }
      />
    )
  }

  {
    caseStudyData?.fields?.belowParallelImgTitle && (
      <Comp6b_belowParallel
        belowParallelImgTitle={documentToHtmlString(
          caseStudyData.fields.belowParallelImgTitle
        )}
        belowParallelImgText={documentToHtmlString(
          caseStudyData.fields.belowParallelImgText
        )}
      />
    )
  }

  {
    caseStudyData.fields.yellowCompTitle && (
      <Comp7Bottom
        yellowCompTitle={documentToHtmlString(
          caseStudyData.fields.yellowCompTitle
        )}
        yellowCompText={documentToHtmlString(
          caseStudyData.fields.yellowCompText
        )}
      />
    )
  }
</Layout>

<style is:global>
  .turnBlack {
    background: transparent;
    position: absolute;
    width: 100%;
  }

  .list ul li a {
    color: white !important;
    opacity: 100% !important;
  }
  path {
    fill: white !important;
  }

  /* connect button css */

  .connect,
  .circles {
    fill: #1a1a1a !important;
  }
  .oval {
    fill: white !important;
  }

  .tele {
    fill: white !important;
  }
  .menu p {
    color: white !important;
  }
  .menu .s1,
  .menu .s2 {
    border: 1px solid white !important;
  }
</style>
